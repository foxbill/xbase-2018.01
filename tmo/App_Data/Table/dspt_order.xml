<?xml version="1.0" encoding="utf-8"?>
<DataSourceSchema xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Id>dspt_order</Id>
  <SubTables>
    <SubTableSchema>
      <Name>kkkk</Name>
      <Fks>
        <string>a1</string>
        <string>a2</string>
        <string>a3</string>
      </Fks>
    </SubTableSchema>
  </SubTables>
  <IsAutoNewLine>false</IsAutoNewLine>
  <UserSqlCommands />
  <PageSize>10</PageSize>
  <References />
  <LookupFields />
  <PrimaryKeys />
  <InsertCommand>
    <CommandText>
      insert into pt_orderDetailCustomValue(ID,OrderId,ProductId,FieldValueId,DelFlag,Summary,Creater,CreateTime,Updater,UpdateTime)
      SELECT @ID,@OrderId,@ProductId,ID,0,'',@user,GETDATE(),@user,GETDATE() FROM pt_productCustomFieldValue WHERE CHARINDEX(','+convert(varchar(20),ID),@FieldValueList)&gt;0 or CHARINDEX(convert(varchar(20),ID)+',', @FieldValueList)&gt;0

    </CommandText>
    <CommandType>Text</CommandType>
    <QueryParams>
      <ParameterSchema>
        <Id>@ID</Id>
        <DataSize>4</DataSize>
        <Direction>Input</Direction>
        <DataType>String</DataType>
        <DefaultValue />
      </ParameterSchema>
      <ParameterSchema>
        <Id>@OrderId</Id>
        <DataSize>4</DataSize>
        <Direction>Input</Direction>
        <DataType>String</DataType>
        <DefaultValue />
      </ParameterSchema>
      <ParameterSchema>
        <Id>@ProductId</Id>
        <DataSize>4</DataSize>
        <Direction>Input</Direction>
        <DataType>String</DataType>
        <DefaultValue />
      </ParameterSchema>
      <ParameterSchema>
        <Id>@user</Id>
        <DataSize>4</DataSize>
        <Direction>Input</Direction>
        <DataType>String</DataType>
        <DefaultValue>[LoginUser.Id]</DefaultValue>
      </ParameterSchema>
      <ParameterSchema>
        <Id>@FieldValueList</Id>
        <DataSize>4</DataSize>
        <Direction>Input</Direction>
        <DataType>String</DataType>
        <DefaultValue />
      </ParameterSchema>
    </QueryParams>
  </InsertCommand>
  <UpdateCommand>
    <CommandText>
      insert into pt_orderDetailCustomValue(ID,OrderId,ProductId,FieldValueId,DelFlag,Summary,Creater,CreateTime,Updater,UpdateTime)
      select @ID,@OrderId,ProductId,FieldValueId,0,'',@user,GETDATE(),@user,GETDATE() from pt_shoppingCartFieldValue where @ShoppingCartId=@ShoppingCartId
    </CommandText>
    <CommandType>Text</CommandType>
    <QueryParams>
      <ParameterSchema>
        <Id>@ID</Id>
        <DataSize>4</DataSize>
        <Direction>Input</Direction>
        <DataType>String</DataType>
        <DefaultValue />
      </ParameterSchema>
      <ParameterSchema>
        <Id>@OrderId</Id>
        <DataSize>4</DataSize>
        <Direction>Input</Direction>
        <DataType>String</DataType>
        <DefaultValue />
      </ParameterSchema>
      <ParameterSchema>
        <Id>@user</Id>
        <DataSize>4</DataSize>
        <Direction>Input</Direction>
        <DataType>String</DataType>
        <DefaultValue>[LoginUser.Id]</DefaultValue>
      </ParameterSchema>
      <ParameterSchema>
        <Id>@ShoppingCartId</Id>
        <DataSize>4</DataSize>
        <Direction>Input</Direction>
        <DataType>String</DataType>
        <DefaultValue />
      </ParameterSchema>
    </QueryParams>
  </UpdateCommand>
  <DeleteCommand>
    <CommandText>
      delete from pt_order where Creater=@user and ID=@OrderId
      delete from pt_orderDetail where Creater=@user and OrderId=@OrderId
      delete from pt_orderDetailCustomValue where Creater=@user and OrderId=@OrderId
    </CommandText>
    <CommandType>Text</CommandType>
    <QueryParams>
      <ParameterSchema>
        <Id>@user</Id>
        <DataSize>4</DataSize>
        <Direction>Input</Direction>
        <DataType>String</DataType>
        <DefaultValue>[LoginUser.Id]</DefaultValue>
      </ParameterSchema>
      <ParameterSchema>
        <Id>@OrderId</Id>
        <DataSize>4</DataSize>
        <Direction>Input</Direction>
        <DataType>String</DataType>
        <DefaultValue />
      </ParameterSchema>
    </QueryParams>
  </DeleteCommand>
  <SelectCommand>
    <CommandText>
      select *, (case Status WHEN 0 THEN '交易进行中'
      WHEN 1 THEN '交易成功'
      WHEN 2 THEN '交易关闭'
      ELSE '其他' END) StatusText,
      (case PayStatus WHEN 0 THEN '待付款'
      WHEN 1 THEN '已付款'
      WHEN 2 THEN '退款处理中'
      WHEN 3 THEN '已退款'
      ELSE '其他' END) payStatusText,
      (case ReceivedStatus WHEN 0 THEN '等待买家付款'
      WHEN 1 THEN '等待卖家发货'
      WHEN 2 THEN '已发货'
      WHEN 3 THEN '已确认收货'
      ELSE '其他' END) receivedStatusText
      from pt_order where Creater=@user
    </CommandText>
    <CommandType>Text</CommandType>
    <QueryParams>
      <ParameterSchema>
        <Id>@user</Id>
        <DataSize>4</DataSize>
        <Direction>Input</Direction>
        <DataType>String</DataType>
        <DefaultValue>[LoginUser.Id]</DefaultValue>
      </ParameterSchema>
    </QueryParams>
  </SelectCommand>
  <Fields>
    <FieldSchema>
      <Id>ID</Id>
      <Title>ID</Title>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>String</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>Code</Id>
      <Title>Code</Title>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>String</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>Name</Id>
      <Title>Name</Title>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>String</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>AddressId</Id>
      <Title>AddressId</Title>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>String</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>Total</Id>
      <Title>Total</Title>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>String</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>Status</Id>
      <Title>Status</Title>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>Int32</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>DelFlag</Id>
      <Title>DelFlag</Title>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>Int32</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>Summary</Id>
      <Title>Summary</Title>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>String</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>Creater</Id>
      <Title>Creater</Title>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>String</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>CreateTime</Id>
      <Title>CreateTime</Title>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>DateTime</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>Updater</Id>
      <Title>Updater</Title>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>String</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>UpdateTime</Id>
      <Title>UpdateTime</Title>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>DateTime</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>PayStatus</Id>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>Int32</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>payStatus1</Id>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>String</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>payStatuxText</Id>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>String</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>ReceivedStatus</Id>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>Int32</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>StatuxText</Id>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>String</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>receivedStatusText</Id>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>String</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>StatusText</Id>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>String</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>payStatusText</Id>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>String</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>ReceivedTime</Id>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>DateTime</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
    <FieldSchema>
      <Id>PayTime</Id>
      <DisplayWidth>60</DisplayWidth>
      <Option>
        <QueryParams />
        <Options />
      </Option>
      <IsInForm>true</IsInForm>
      <IsInCard>true</IsInCard>
      <IsKey>false</IsKey>
      <ExtendType>None</ExtendType>
      <ReadOnly>false</ReadOnly>
      <Valids />
      <DataType>DateTime</DataType>
      <Visable>true</Visable>
      <IsAutoInc>false</IsAutoInc>
      <IsGUID>false</IsGUID>
    </FieldSchema>
  </Fields>
  <TableName>pt_order</TableName>
  <IsPagingByParams>false</IsPagingByParams>
</DataSourceSchema>